#summary This is a brief overview of the Termite Editor.

= Overview =

Termite is an OpenStreetMap editor that is designed for indoor maps. It is a fully functional editor that can edit outdoor data also.

=== A Few Disclaimers ===

*Termite is currently in early testing.* Any feedback is appreciated to improve it. And, patience may be required in using it.

*OpenStreetMap currently does not have a standard for making indoor maps.* Termite uses one of the proposed mapping standards. It is also designed so the underlying model used can be changed.

*Termite as currently shipped is NOT connected to the live database. It is connected to a dev database. This database currently has little data. In many cases you will be starting from scratch.

= Getting Started =
 
You need to following to get started with Termite:
 * the java application file (jar)
 * configuration files needed for the program
 * java 6 or later runtime (JRE)
 * a username and password to edit OSM data *on the server http://api06.dev.openstreetmap.org/ *
  ** This is the dev server. You can create an account from the URL.

_give instructions for starting program on different platforms_

= Program Basics =

== UI Elements ==

 * Menu Bar - Holds the menus
 * Toolbar
  ** Mode Toolbar - Hold buttons to select the edit mode
  ** Submode Toolbar - Additional controls specific to the selected mode.
 * Left Panel
  ** Content Tree - This lets you select the map area to view, which may be the outdoors or a building level.
  ** Feature Layer Panel - This lets you select the feature type. The feature type tells the type of object. For example, the feature type may be "highway=primary". See more on the feature type below.
  ** Property Panel - This shows properties of the selected object. The properties can be edited from here.
 * Map Panel - This holds the map.
 * Supplemental Panel - This contains tabs with additional functionality.
  ** Map Layers Tab - This tab lets you control the opacity of the different visible layers, which is useful when tracing objects.

http://wiki.openstreetmap.org/w/images/2/21/Termite_UI_v0.png

=== Controlling the Map ===

The basic operations for controlling the map display are the following:

PAN - Options:
 * Right click and drag the screen
 * Arrow keys

Zoom - Note that the screen will zoom about the mouse position if the mouse is in the map display. Otherwise it zooms about the center. Options:
 * Graphical buttons + and - on the display
 * Page Up and Page Down keys
 * Mouse wheel

===== Hover, Preview and Snapping =====
Before a select, the item to be selected is highlighted. Likewise, before and edit action is executed (such as a node being added to a way using the way tool) the UI displays a preview of the action. The edit action will snap to nearby nodes, lines and extensions.

In many cases, there are multiple options for the object that can be selected or the object to which an edit action can snap. The following key strokes can be used to change the hover or preview item.
 * Greater Than key - Toggles to the next choice of hover/preview
 * Less Than key - Toggles to the previous choice of hover/select
(Note: these keys may be keyboard specific. The actual key tested is Period instead of greater than and Comma instead of less than.)

For example, Two objects often share a boundary, such as a room and a wall, or two neighboring rooms. If you hover over this boundary, one room may highlight. If you click the mouse this room will be selected. If you press the 'Greater Than' key, the other room will highlight. If the mouse is pressed now the other room will be selected.

This feature is important because of the overlay of objects.

=== Feature Type ===
In OpenStreetMap all objects store meta data as key-value pair properties. The feature type, such as "highway=primary" is stored in the properties. In Termite, the recommended usage is to select the desired feature type in the feature layer panel prior to drawing an object. When the object is drawn, whether it is a node or a way, the necessary properties will automatically be added to the object.

It is also possible to change the feature type using the feature layer panel. If you select the object and then press the button "Change Feature Type" this will set the feature type to be the one currently selected in the feature layer panel.

If you want to add an object that is not in the tree, you can set the feature type to be the root of the tree, "object". Then, you can add your own properties using the property panel. (This can done regardless of whether the feature type appears in the feature layer panel.)

== Checking Out Data ==
When you start the program, the map will be empty. (There is currently no saving of the editor state.) The program is in checkout search mode, which lets you find a region on the map where you download data form the OSM database to edit.

From the map menu, you can select "Base Map" to open a background map.

Then you can navigate using pan and zoom to find the region you would like to open. *NOTE - the search to help find a location is not implemented.*

When you find the area you want to check out, select a rectangle window and then press "download data" to check out map data. 

== Editing ==

Once you check out data a toolbar is enabled that controls the edit mode. The modes are:

=== Select Mode ===
In Select Mode use the mouse to select objects. A secondary toolbar shows a list of commands that can be done with the selected data.

*NOTE - Generally, dragging the mouse is not used for editing. Actions are done by single clicking the mouse.*

==== Toggle Buttons ====
 * Select - lets you select a way or a node
 * Move - Let's you move the selected object, to the location of the next mouse click. *SHORTCUT* - press the keyboard 'm' key instead of using the toolbar button.

==== Actions on Selected Object ====
 * Delete - Deletes the selected object(s)
 * Remove Node - If you select a way, you can select nodes within the way. These nodes can be removed by pressing the remove node button.
 * Change Feature Type - This sets the feature type of the object to be the selected feature type (such as 'wall').
 * Create Level - This should be done on objects in the outdoors. It creates an indoor level for the associated outdoor object, usually a building. See below for more information on creating a level.

==== Editing Properties ====
When an object is selected the properties of the object can be edited in the property panel.

=== Node Tool ===
This mode allows you to create a node object. The node object is created with a feature type given by the selected feature type in the feature type tree.

The node will appear as a small circle.

=== Way Tool ===
The way tool allows you to create a way object. Clicking the map will add a node at the given location. Or, if a node is clicked, that node will be added to the way. The feature type for the way is given by the selected feature type in the feature type tree.

Each time the map is clicked, a node is added to the active way. The active way can be ended the following ways:
 * double click
 * press the ESC key
 * close a way

If you want to add points to an existing way, go to Select Mode and select the way. By default points will be added to the end of the way. However, you can select one of the end nodes within the way (either the first or the last) and then switch to the Way Tool. Now, nodes drawn will be added to the selected end of the way.

If you draw a way with the wrong feature type, you can change the feature type by selecting the object and pressing the "Change Feature Type" button in the toolbar. This will set the feature type to the type selected in the feature type tree.

== Saving Data ==

To save data, go to the "File" menu and select "Commit". This will open a dialog to commit that data. If you have not logged in, a login screen will let you enter your username and password (for the dev server, in this case). Then you must enter a commit message that briefly describes the changes you have made. The data will then be saved to the OpenStreetMap server.

You can discard your data by going to the "File" menu and selecting "Discard Data". This will clear the downloaded data and discard any edits.

= Adding Indoor Data =
The content tree has an entry for the outdoors and entries for buildings and levels. When the outdoor entry is selected any drawn data is added to the outdoors. When an level is selected, data is added to that level.

To create a level, go to the outdoors. Select a building object and then press the "Create Level" toolbar button. This brings up a dialog to enter the needed information.
 * Zlevel - This is an integer that identifies the level programmatically. This is *NOT* intended for people. The ground level should be 0. Levels above the ground level should be positive integers. Levels below the ground level should be negative integers. 
 * Display Name - This is the name of the level that people will use. It is often the name you would see on an elevator button for the floor. It may be "1" for the ground level (even though the zlevel is 0). It may also be something like "B1" or "Mezzanine", or "M". This can be any string value.

Once the level is created, it will appear in the content tree. To edit the level, just select the level in the content tree.

== Source Data ==
Indoor maps are often created by copying source images. The following process is used:

 * Load a source image into the editor
 * Geocode the image using Geocode Mode
 * Add ways and nodes to the desired level

=== Loading a Source Image ===
From the "Map" menu item, select "Open Source...". This will bring up a file dialog to open an image file. The file will then appear on the map.

=== Geocode an Image ===
Once an image is loaded, switch to Geocode Mode. There are three different kinds of geocode which can be done:
 * Two Point - This allows you to translate, rotate and scale the image. It requires 2 points.
 * Three Point Orthoganal - This allows you to translate, rotate and scale the image separately in the X and Y directions.
 * Three Point Free - This allows you to place three point arbitrarily. It allows translation, rotation, scale and skew. (NOT IMPLEMENTED)

When geocoding, a Two Point geocode should be tried first. If this does not work, a Three Point Orthogonal geocode should be done. Only a last resort should a Three Point Free geocode be done.

Once the geocode method is selected, place anchor points on the map by pressing the associated toolbar buttons and clicking the map. 

After placing the anchor, click on the anchor in SELECT mode and then enter MOVE mode (or use the 'm' shortcut key) click the map to move to the image. 

==== Geocode Anchor Types ====
The different anchors have different effects. The types of anchors available depend on the type of geocode done.

 * Translate Anchor - translates the entire image (Two Point and Three Point Ortho Geocode)
 * Rotate/Scale - Moves the image by rotating and scaling while holding the translate anchor fixed. (Two Point Geocode) 
 * Rotate/Scale X - Moves the image by rotating and scaling the X direction of the image while holding the translate anchor fixed. (Three Point Ortho Geocode)
 * Rotate/Scale Y - Moves the image by rotating and scaling the Y dimension of the image while holding the translate anchor fixed. (Three Point Ortho Geocode)
 * Free Anchor - This moves a point to the specified location without moving the other anchors (3 Point Free Geocode) 

Once the image is in the desired location, it can be traced.

==== Changing Layer Opacity - Map Layer Tab ====
In the supplemental panel there is a "Map Layer" tab which controls the opacity of the different layers. This is helpful for geocoding and tracing.  

=== Editing a Level ===
To edit the level, select the level in the content tree. If necessary, see the section above for information on creating a level.

When the level is selected, that level is displayed. Any nodes or ways added are automatically added to that level.

To add data, use the way tool or node tool and trace from the source imagery.

==== Frame of Reference - North Up or Source ====
It is often easier to trace source data in the reference frame of the source data. This is because then many lines are horizontal or vertical. It is easier to draw horizontal and vertical lines, particularly with snap to horizontal and vertical.

When a source image is loaded, there is a drop down selection on the map panel that allows you to select the map reference. The default reference is north up. Alternatively you can select to display the map with the orientation of the source imagery, to make copying easier.